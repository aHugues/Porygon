<mat-card class="card-container">

    <mat-card-header>
        <mat-card-title>
            <h2>Modifier emplacement</h2>
        </mat-card-title>
    </mat-card-header>

    <form (ngSubmit)="onSubmit()" #locationForm="ngForm">

        <div class="form-container">

            <mat-card-content>
                <mat-form-field>
                    <input matInput placeholder="Label" type="text" id="label"
                    required
                    [(ngModel)]="selectedLocation.label" name="label"
                    >
                </mat-form-field>
            </mat-card-content>

            <mat-card-actions>
                <span>

                    <button type="submit" color="primary" mat-raised-button class="form-button">Enregistrer</button>

                    <button *ngIf="!newResource" (click)="onDelete()" color="warn" mat-raised-button class="form-button">Supprimer</button>

                </span>
            </mat-card-actions>

        </div>

    </form>


</mat-card>

<mat-card *ngIf="!newResource" class="card-container">

    <mat-card-header>
        <mat-card-title>
            <h5>Films à cet emplacement</h5>
        </mat-card-title>
    </mat-card-header>

    <mat-card-content>

        <mat-list cols="4" rowHeight="50px" class="list">
            <mat-list-item class="list-header">
              <span class="list-element" role="button" (click)="onSortMovies(1)"> Titre <i class="fa fa-fw fa-sort"></i></span>
              <span class="list-element" role="button" (click)="onSortMovies(2)"> Localisation <i class="fa fa-fw fa-sort"></i></span>
              <span class="list-element" role="button" (click)="onSortMovies(3)"> Année de sortie <i class="fa fa-fw fa-sort"></i></span>
              <span class="list-element"> Remarques </span>
            </mat-list-item>
        </mat-list>
        <mat-list cols="4" rowHeight="50px" class="list">
            <mat-list-item *ngFor="let movie of moviesList" [routerLink]="['/porygon/details/movie', movie.id]" class="list-row">
              <span class="list-element"> {{ movie.title }} </span>
              <span class="list-element"> {{ movie.Location.label }} </span>
              <span class="list-element"> {{ movie.year }} </span>
              <span class="list-element"> {{ movie.remarks }} </span>
          </mat-list-item>
        </mat-list>

    </mat-card-content>

    <mat-card-actions>
        <mat-paginator [length]="numberOfMovies" [pageSize]="numberPerPage" [pageSizeOptions]="pageSizeOptions" (page)="onMoviePageChanged($event)">
        </mat-paginator>
    </mat-card-actions>

</mat-card>

<mat-card *ngIf="!newResource" class="card-container">

    <mat-card-header>
        <mat-card-title>
            <h5>Séries à cet emplacement</h5>
        </mat-card-title>
    </mat-card-header>

    <mat-card-content>

        <mat-list cols="4" rowHeight="50px" class="list">
            <mat-list-item class="list-header">
              <span class="list-element" role="button" (click)="onSortSeries(1)"> Titre <i class="fa fa-fw fa-sort"></i></span>
              <span class="list-element"> Saison <i class="fa fa-fw fa-sort"></i></span>
              <span class="list-element" role="button" (click)="onSortSeries(2)"> Localisation <i class="fa fa-fw fa-sort"></i></span>
              <span class="list-element"> Remarques </span>
            </mat-list-item>
        </mat-list>
        <mat-list cols="4" rowHeight="50px" class="list">
            <mat-list-item *ngFor="let serie of seriesList" [routerLink]="['/porygon/details/serie', serie.id]" class="list-row">
              <span class="list-element"> {{ serie.title }} </span>
              <span class="list-element"> {{ serie.season }} </span>
              <span class="list-element"> {{ serie.Location.label }} </span>
              <span class="list-element"> {{ serie.remarks }} </span>
          </mat-list-item>
        </mat-list>
    </mat-card-content>

    <mat-card-actions>
        <mat-paginator [length]="numberOfSeries" [pageSize]="numberPerPage" [pageSizeOptions]="pageSizeOptions" (page)="onSeriePageChanged($event)">
        </mat-paginator>
    </mat-card-actions>

</mat-card>


<!-- <div class="alert alert-warning"><strong>TODO : </strong>Gérer cas de suppression impossible car foreignKey</div> -->
